import utime
from machine import Pin, PWM

ir_blink = PWM(Pin(23))
ir_blink.freq(38000)
ir_blink.duty(50)

#Testdata
data = [(0, 8514), (1, 4308), (0, 585), (1, 1557), (0, 585), (1, 529), (0, 589), (1, 1585), (0, 572), (1, 540), (0, 551), (1, 550), (0, 587), (1, 1582), (0, 573), (1, 531), (0, 560), (1, 1606), (0, 549), (1, 550), (0, 597), (1, 1570), (0, 585), (1, 531), (0, 559), (1, 1589), (0, 566), (1, 1602), (0, 534), (1, 593), (0, 573), (1, 1587), (0, 585), (1, 519), (0, 577), (1, 531), (0, 585), (1, 543), (0, 573), (1, 1578), (0, 585), (1, 1582), (0, 586), (1, 1580), (0, 584), (1, 524), (0, 541), (1, 562), (0, 585), (1, 543), (0, 548), (1, 1603), (0, 552), (1, 1614), (0, 547), (1, 556), (0, 584), (1, 534), (0, 540), (1, 563), (0, 584), (1, 1582), (0, 572), (1, 1605), (0, 585), (1, 1564), (0, 576), (1, 25503), (0, 8517), (1, 4291), (0, 590), (1, 1564), (0, 559), (1, 543), (0, 623), (1, 1558), (0, 577), (1, 550), (0, 547), (1, 531), (0, 585), (1, 1582), (0, 587), (1, 537), (0, 559), (1, 1582), (0, 573), (1, 563), (0, 587), (1, 1564), (0, 598), (1, 506), (0, 560), (1, 1608), (0, 548), (1, 1602), (0, 610), (1, 518), (0, 598), (1, 1588), (0, 553), (1, 524), (0, 598), (1, 531), (0, 585), (1, 518), (0, 573), (1, 1578), (0, 609), (1, 1557), (0, 597), (1, 1577), (0, 587), (1, 524), (0, 541), (1, 563), (0, 584), (1, 543), (0, 547), (1, 1602), (0, 553), (1, 1614), (0, 547), (1, 556), (0, 610), (1, 500), (0, 566), (1, 560), (0, 585), (1, 1575), (0, 601), (1, 1570), (0, 585), (1, 1563), (0, 598), (1, 25503), (0, 8518), (1, 4291), (0, 566), (1, 1577), (0, 585), (1, 518), (0, 597), (1, 1561), (0, 603), (1, 524), (0, 547), (1, 556), (0, 585), (1, 1589), (0, 566), (1, 538), (0, 559), (1, 1607), (0, 547), (1, 562), (0, 610), (1, 1542), (0, 598), (1, 506), (0, 560), (1, 1608), (0, 564), (1, 1603), (0, 610), (1, 518), (0, 573), (1, 1603), (0, 563), (1, 525), (0, 598), (1, 531), (0, 584), (1, 518), (0, 573), (1, 1576), (0, 610), (1, 1557), (0, 572), (1, 1602), (0, 609), (1, 478), (0, 566), (1, 549), (0, 585), (1, 543), (0, 547), (1, 1602), (0, 552), (1, 1615), (0, 547), (1, 556), (0, 609), (1, 499), (0, 566), (1, 562), (0, 595), (1, 1557), (0, 598), (1, 1577), (0, 584), (1, 1583), (0, 572), (0, 8517)] 

def send_data(data):
    for time in data:
        if time[0] == 0:
            ir_blink.init()
            utime.sleep_us(time[1])
            ir_blink.deinit()
        elif time[0] == 1:
            ir_blink.deinit()
            utime.sleep_us(time[1])
            ir_blink.init()
    return

send_data(data)